const t=()=>{const t=new WeakMap;return(e,n)=>t.get(e)||n&&t.set(e,n).get(e)},e=t(),n=t(),o=new Map,s=t(),c=t(),r=t(),a=t(),i=t(),l=t(),p=(t,e,...n)=>{const o=s(e);if(o)for(const s of o[t]||[])o[t].includes(s)&&s(e,...n)},f=t=>{const e=[t];let n;for(;n=e.shift();){for(const t of r(n,[]))t();for(const t of n.childNodes)e.push(t)}},u=(t,e,n,o)=>{const c=s(t,{});c[n]?c[n].push(o):c[n]=[o];r(e,[]).push((()=>{const e=s(t);e&&e[n]&&(e[n]=e[n].filter((t=>t!==o)))}))},d=(t,e,n,s={})=>{const c=o.get(t);c&&c.dispatchEvent(new CustomEvent(e,Object.assign({bubbles:!0,cancelable:!1,composed:!0,detail:n},s)))},h=(t,e)=>{if(t)p(`set:${e||""}`,t);else for(const t of o.keys())p("set:",t)},g=t=>t.entries?t.entries():Object.entries(t),m=t=>JSON.stringify(t),w=t=>{const e={};return(...n)=>{const o=m(n);return e[o]||(e[o]=t(...n))}},b=w(((t,e)=>new Function(t,e))),y=t=>b("$scope",`return ${t}`),C=t=>t.replace(/-(\p{Ll})/gu,(t=>t[1].toUpperCase())),v=(t,e,n)=>{!0===n&&(n=""),"string"==typeof n?t.setAttribute(e,n):t.removeAttribute(e)},$=(t,e,n)=>{const o=a(t,{});let s=o[e];if(!s){let n=t[e];const c=Object.getOwnPropertyDescriptor(t,e)||{};s=[],o[e]=s,Object.defineProperty(t,e,{get:c.get||(()=>n),set:function(t){const e=n;if(t!==e){c.set?c.set(t):n=t;for(const n of s)n(this,t,e)}}})}s.push(n)},T=(t,e)=>{"function"==typeof t&&(t=t.prototype),i(t,[]).push(e)},N=()=>M,E=(t,e)=>M(t.constructor.prototype,e),M=(t,e)=>T(t,(t=>{u(t,o.get(t),"init",(t=>{const n=e.replace(/\p{Lu}/gu,(t=>`-${t[0]}`.toLowerCase()));const s=o.get(t);if(s){const o=(t,n,o)=>{t[e]=o,t.onChange&&t.onChange(e,n,o)};u(t,s,`attr:${n}`,o),o(t,null,s.getAttribute(n))}$(t,e,((t,e)=>{const s=o.get(t);s&&v(s,n,e)}))}))})),S=document,L=window,j=t=>S.createElement(t),x=t=>{const e=j("style");return e.appendChild((t=>S.createTextNode(t))(t)),e};function O(t,e,n,o){u(t,e,"set:",n);for(const s of o){const o=`set:${s}`;$(t,s,((t,e,n)=>{p(o,t,e,n),t.onChange&&t.onChange(s,e,n)})),u(t,e,o,n)}}const k=t=>{let e=l(t),n=t.parentNode;for(;!e&&n;)e=l(n),n=n.parentNode;return e||{}},P=(t,e)=>{const n=Object.create(t);return l(e,n),n},A=w((t=>{const e=t.split(/{{(.*?)}}/);if(e.length<2)return null;const n=[];let o=!1;const s=new Set;for(const t of e){if(o){n.push(y(t));for(const e of H(t))s.add(e)}else n.push(t);o=!o}return{fn:function(t){return n.map((e=>{return e=e&&e.call?e.call(this,t):e,null==(n=e)?"":`${n}`;var n})).join("")},binds:s}})),D=/this\.((?:\$|_|\p{L}|\p{Nl})(?:\$|_|\p{L}|\p{Nl}|\u200C|\u200D|\p{Mn}|\p{Mc}|\p{Nd})*)/u,H=w((t=>{const e=new Set,n=t.split(D);for(let t=1;t<n.length;t+=2)e.add(n[t]);return e})),V=[{"*for":(t,e,n,o)=>{let s="key",c="value";const r=o.match(/^\s*(?:(?:(\S+)\s*,\s*)?(\S+)\s+of\s+)?(\S+)\s*$/);r&&(s=r[1]||s,c=r[2]||c,o=r[3]);const a=y(o),i=k(e);let l=new Map;const p=t=>{const o=a.call(t,i)||[];let r=l;l=new Map;let p=e;const u=new Map(r);for(const[t]of g(o))u.delete(t);for(const t of u.values())f(t),t.remove(),r.delete(t);for(const[e,a]of g(o)){let o=r.get(e);if(r.delete(e),o!==p.nextSibling){o&&(f(o),o.remove()),o=n.cloneNode(!0);const r=P(i,o);r[s]=e,r[c]=a,U(o,t),p.after(o)}else{P(i,o)[c]=a}p=o,l.set(e,p)}for(const t of r.values())f(t),t.remove()};O(t,e,p,H(o)),p(t)},"*if":(t,e,n,o)=>{const s=y(o),c=k(e);let r=null;const a=t=>{s.call(t,c)?r||(r=n.cloneNode(!0),U(r,t),e.after(r)):r&&(f(r),r.remove(),r=null)};O(t,e,a,H(o)),a(t)},"*repeat":(t,e,n,o)=>{let s="index";const c=o.match(/^(\S+)\s+as\s+(\S+)$/);c&&(o=c[1],s=c[2]);const r=y(o),a=k(e);let i=[];const l=t=>{let o=+r.call(t,a);for(;i.length>o;){const t=i.pop();f(t),t.remove()}let c=i.length+1,l=i[c-1]||e;for(;i.length<o;){let e=n.cloneNode(!0);P(a,e)[s]=c++,U(e,t),i.push(e),l.after(e),l=e}};O(t,e,l,H(o)),l(t)}},{"":(t,e,n,o)=>{const s=A(n);if(s){const n=t=>{const n=s.fn.call(t,k(e));v(e,o,n)};O(t,e,n,s.binds),n(t)}},"@":(t,e,n,o)=>{const[s,...c]=C(o.slice(1)).split("."),r=k(e),a=b("s,e",`(($scope,$event)=>{${n}})(s,e)`),i={},l=new Set(c);let p=e;for(const t of["passive","capture","once"])l.has(t)&&(i[t]=!0);l.has("window")&&(p=L),(l.has("document")||l.has("outside"))&&(p=S),p.addEventListener(s,(n=>{l.has("prevent")&&n.preventDefault(),l.has("stop")&&n.stopPropagation();const o=n.target;l.has("self")&&o!==e||l.has("outside")&&e.contains(o)||a.call(t,r,n)}),i),v(e,o)},"#ref":(t,e,n,o)=>{t[C(n)]=e,v(e,o)},".":(t,e,n,o)=>{const s=y(n),c=C(o.slice(1)),r=k(e),a=t=>{const n=s.call(t,r);e[c]=n};O(t,e,a,H(n)),a(t),v(e,o)}}],I=(t,e)=>V["*"===t.charAt(0)?0:1][t]=e;function R(t,e){if(1===e.nodeType){for(const n of[...e.attributes]){const o=n.nodeName,s=o.charAt(0),c=V[1],r=c[o]||c[s]||c[""];r&&r(t,e,n.nodeValue||"",o)}const n=A(e.textContent||"");if(n){const o=t=>{e.nodeValue=n.fn.call(t,k(e))};O(t,e,o,n.binds),o(t)}}return 1}const z=(t,e,n)=>{const o=n.attributes;if(1===n.nodeType&&o){let c;for(const[t,e]of g(V[0])){const n=o.getNamedItem(t);if(n){if(c)throw new Error(`${c[0]} breaks ${t}`);c=[t,e,n.nodeValue||""]}}if(c){const o=(s=`${c[0]}=${m(c[2])}`,S.createComment(s));return n.before(o),e.previousNode(),n.remove(),v(n,c[0]),c[1](t,o,n,c[2],c[0]),1}}var s};function q(t,e){if(3===e.nodeType){const n=A(e.textContent||"");if(n){const o=t=>{e.nodeValue=n.fn.call(t,k(e))};return O(t,e,o,n.binds),o(t),1}}}const F=(t,e)=>{const n=S.createTreeWalker(t,133);let o;for(;o=n.nextNode();)"TEMPLATE"===o.nodeName&&F(o.content,e),z(e,n,o)||q(e,o)||R(e,o)},U=(t,e)=>{const n=S.createDocumentFragment();n.append(t),F(n,e)};class W extends HTMLElement{constructor(){super(),l(this,{})}attributeChangedCallback(t,e,n){const o=c(this);p(`attr:${t}`,o,e,n)}connectedCallback(){const t=this.constructor,s=new(n(t));c(this,s),o.set(s,this),(t=>{let e=t.constructor.prototype;for(;e;){for(const n of i(e)||[])n(t);n=e,e=Object.getPrototypeOf(n)}var n})(s);const r=e(t),a=this.shadowRoot||this.attachShadow({mode:"open"});r.style&&a.appendChild(x(r.style)),s.onInit&&s.onInit(),p("init",s);const l=r.template,f=j("template");f.innerHTML=l,F(f.content,s),a.append(f.content),s.onViewInit&&s.onViewInit()}disconnectedCallback(){const t=c(this);f(this),o.delete(t),this.innerHTML="",this.shadowRoot&&(this.shadowRoot.innerHTML=""),t&&t.onDestroy&&t.onDestroy()}}const _=(t,e)=>n=>{J(t,e,n)},G=customElements,J=(t,o,s)=>{const c=class extends W{};e(c,o),n(c,s||class{}),G.get(t)||G.define(t,c)},X=new Map,Y=[],B=t=>{if(Y.includes(t))throw Y.push(t),new Error(`Circular dependency: ${Y.map((t=>`${t.name}`)).join(" -> ")}`);Y.push(t);const e=X.get(t)||X.set(t,new t).get(t);return Y.pop(),e},K=(t,e)=>{X.set(t,e)},Q=()=>tt,Z=(t,e)=>tt(t.constructor.prototype,e),tt=(t,e)=>{T(t,(t=>{u(t,o.get(t),"init",(t=>{const n=o.get(t);if(n){const t=(t,n)=>{c(t)[e]=n};$(n,e,t),t(n,n[e])}}))}))},et=t=>t.toUpperCase(),nt=(t,e,n)=>{const o=new Error(t);return o.code=e,o.response=n,o},ot=t=>new Promise(((e,n)=>{const o=new Map([["CONTENT-TYPE","application/json; charset=utf8"],["ACCEPT","application/json, text/*"]]);for(const e of g(t.headers||{}))o.set(et(e[0]),e[1]);const s=(e,n)=>r[e]=t[e]||n;let c=!1;const r=new XMLHttpRequest;r.open(et(t.method||"GET"),t.url,!0,t.user,t.password),s("responseType","json"),s("withCredentials"),s("timeout");for(const t in o)r.setRequestHeader(t[0],t[1]);r.onreadystatechange=o=>{const s=o.target;if(4===s.readyState)try{let o=s.response;t.deserialize&&(o=t.deserialize(o)),s.status>=200&&s.status<300?e(o):setTimeout((()=>{if(!c){try{o=s.responseText}catch(t){}n(nt(o,s.status,o))}}))}catch(t){n(t)}},r.ontimeout=t=>{c=!0,n(nt("Timeout",t.target.status))},r.send((t.serialize||m)(t.body))})),st=(t,...e)=>String.raw({raw:t},...e),ct=st;export{N as Attr,_ as Component,W as CustomElement,Q as Prop,I as addDirective,E as attr,J as component,ct as css,B as di,K as diOverride,d as emit,H as findBindings,st as html,o as metadataControllerElement,A as parseText,Z as prop,X as registered,ot as request,h as update};